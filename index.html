<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Multiple Run Time Permission by Priyanka-Mohanty</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Multiple Run Time Permission</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/Priyanka-Mohanty/MultipleRunTimePermission" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/Priyanka-Mohanty/MultipleRunTimePermission/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/Priyanka-Mohanty/MultipleRunTimePermission/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>
<a id="requesting-permissions-at-run-time" class="anchor" href="#requesting-permissions-at-run-time" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requesting Permissions at Run Time</h1>

<p>Beginning in Android 6.0 (API level 23), users grant permissions to apps while the app is running, not when they install the app. This approach streamlines the app install process, since the user does not need to grant permissions when they install or update the app. It also gives the user more control over the app's functionality; for example, a user could choose to give a camera app access to the camera but not to the device location. The user can revoke the permissions at any time, by going to the app's Settings screen.</p>

<p>System permissions are divided into two categories, normal and dangerous:</p>

<p>Normal permissions do not directly risk the user's privacy. If your app lists a normal permission in its manifest, the system grants the permission automatically.
Dangerous permissions can give the app access to the user's confidential data. If your app lists a normal permission in its manifest, the system grants the permission automatically. If you list a dangerous permission, the user has to explicitly give approval to your app.</p>

<p>On all versions of Android, your app needs to declare both the normal and the dangerous permissions it needs in its app manifest, as described in Declaring Permissions. However, the effect of that declaration is different depending on the system version and your app's target SDK level:</p>

<p>If the device is running Android 5.1 or lower, or your app's target SDK is 22 or lower: If you list a dangerous permission in your manifest, the user has to grant the permission when they install the app; if they do not grant the permission, the system does not install the app at all.
If the device is running Android 6.0 or higher, and your app's target SDK is 23 or higher: The app has to list the permissions in the manifest, and it must request each dangerous permission it needs while the app is running. The user can grant or deny each permission, and the app can continue to run with limited capabilities even if the user denies a permission request.</p>

<h2>
<a id="note-beginning-with-android-60-api-level-23-users-can-revoke-permissions-from-any-app-at-any-time-even-if-the-app-targets-a-lower-api-level-you-should-test-your-app-to-verify-that-it-behaves-properly-when-its-missing-a-needed-permission-regardless-of-what-api-level-your-app-targets" class="anchor" href="#note-beginning-with-android-60-api-level-23-users-can-revoke-permissions-from-any-app-at-any-time-even-if-the-app-targets-a-lower-api-level-you-should-test-your-app-to-verify-that-it-behaves-properly-when-its-missing-a-needed-permission-regardless-of-what-api-level-your-app-targets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Note: Beginning with Android 6.0 (API level 23), users can revoke permissions from any app at any time, even if the app targets a lower API level. You should test your app to verify that it behaves properly when it's missing a needed permission, regardless of what API level your app targets</h2>

<p><strong>First,Storing All the permissions in string Array:</strong></p>

<pre><code>`String[] permissions = new String[]{
        Manifest.permission.WRITE_EXTERNAL_STORAGE,
        Manifest.permission.CAMERA,
        Manifest.permission.ACCESS_COARSE_LOCATION,
        Manifest.permission.ACCESS_FINE_LOCATION,
        Manifest.permission.CALL_PHONE,
        Manifest.permission.SEND_SMS,
        Manifest.permission.ACCESS_NETWORK_STATE,
        Manifest.permission.INTERNET};`
</code></pre>

<p><strong>Check For All Permissions at a time</strong></p>

<pre><code>`public static final int REQUEST_ID_MULTIPLE_PERMISSIONS = 1;

 int result;
 List&lt;String&gt; listPermissionsNeeded = new ArrayList&lt;&gt;();
 for (String p : permissions) {
 result = ContextCompat.checkSelfPermission(getApplicationContext(), p);
 if (result != PackageManager.PERMISSION_GRANTED) {
 listPermissionsNeeded.add(p);
 }
 }
if (!listPermissionsNeeded.isEmpty()) {
ActivityCompat.requestPermissions(this,listPermissionsNeeded.toArray(new String[listPermissionsNeeded.size()]),    REQUEST_ID_MULTIPLE_PERMISSIONS);
return false;
}`
</code></pre>

<p>In this code, I am calling a method i.e <strong>checkPermissions()</strong> in MainActivity,where i am writing the code for accessing all the permission </p>

<pre><code>`private boolean checkPermissions() {
    int result;
    List&lt;String&gt; listPermissionsNeeded = new ArrayList&lt;&gt;();
    for (String p : permissions) {
        result = ContextCompat.checkSelfPermission(getApplicationContext(), p);
        if (result != PackageManager.PERMISSION_GRANTED) {
            listPermissionsNeeded.add(p);
        }
    }
    if (!listPermissionsNeeded.isEmpty()) {
        ActivityCompat.requestPermissions(this, listPermissionsNeeded.toArray(new String[listPermissionsNeeded.size()]), REQUEST_ID_MULTIPLE_PERMISSIONS);
        return false;
    }
    return true;
}`
</code></pre>

<h1>
<a id="output" class="anchor" href="#output" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Output:</h1>

<p><img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120827.png" alt="First Screen">
<img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120832.png" alt="Second Screen">
<img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120841.png" alt="Third Screen">
<img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120845.png" alt="Fourth Screen">
<img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120848.png" alt="Fifth Screen">
<img src="https://raw.githubusercontent.com/Priyanka-Mohanty/MultipleRunTimePermission/gh-pages/Images/Screenshot_20160803-120854.png" alt="Sixth Screen"></p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/Priyanka-Mohanty">Priyanka-Mohanty</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
